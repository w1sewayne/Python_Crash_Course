# 🐍 Python Chapter 4: 操作列表 (Working with Lists) 速查表

> **核心概念**：如果说列表是仓库，那这一章就是教你如何通过“传送带”（循环）自动化处理仓库里的货物，以及如何精准地切割和复制货物。

## 1. 循环与数字 (Looping & Numbers)

**生活类比**：`for` 循环就像工厂流水线。无论传送带上有 3 个零件还是 100 万个零件，机械臂（循环体）都会重复执行相同的动作。

| 功能 | 英文关键字 | 代码示例 | 备注/类比 |
| :--- | :--- | :--- | :--- |
| **遍历列表** | `for ... in` | `for pizza in pizzas:`<br>&nbsp;&nbsp;&nbsp;&nbsp;`print(pizza)` | **冒号不能丢！**<br>缩进的代码就是“机械臂”的动作。 |
| **生成数字** | `range()` | `range(1, 5)` | **含头不含尾**<br>输出：1, 2, 3, 4 (不到 5) |
| **创建数字列表** | `list()` | `numbers = list(range(1, 6))` | 把生成的数字装进盒子里变成列表。 |
| **简单统计** | `min/max/sum` | `min(nums)`, `sum(nums)` | 对数字列表求最小、最大、总和。 |
| **列表推导式** | Comprehension | `[x**2 for x in range(1, 6)]` | **高阶写法 (魔法压缩)**<br>倒着读：把 1-5 里的 x 拿出来平方，放入新列表。 |

---

## 2. 切片与复制 (Slicing & Copying) **[重难点!]**

**核心区别**：这部分最容易搞混的是“复制”。
* **切片复制 `[:]`**：像是**复印文件**。你在复印件上涂改，原件不受影响。
* **直接赋值 `=`**：像是**给文件起外号**。它是同一份文件，撕了外号对应的文件，原文件也就没了。

| 操作 | 语法 | 示例 `p = ['a', 'b', 'c', 'd', 'e']` | 结果 |
| :--- | :--- | :--- | :--- |
| **取前几个** | `[:n]` | `p[:3]` | `['a', 'b', 'c']` (索引 0,1,2) |
| **取中间** | `[start:end]` | `p[1:4]` | `['b', 'c', 'd']` (含头不含尾) |
| **取最后几个** | `[-n:]` | `p[-2:]` | `['d', 'e']` (**超好用！**无论列表多长) |
| **列表复制** | `[:]` | `my_list = p[:]` | ✅ **成功分身**：两个独立的列表。 |
| **错误复制** | `=` | `my_list = p` | ❌ **只是别名**：修改一个，另一个也会变！ |

---

## 3. 元组 (Tuples)

**生活类比**：
* **列表 `[]`** 是**便利贴**，随时可以撕下来重写。
* **元组 `()`** 是**石碑**，一旦刻好（定义好）就不能改动其中某一个字。

| 特性 | 列表 List | 元组 Tuple | 备注 |
| :--- | :--- | :--- | :--- |
| **符号** | 方括号 `[]` | 圆括号 `()` | `t = (200, 50)` |
| **修改元素** | ✅ 允许 | ❌ **禁止** (`TypeError`) | 元组是不可变的 (Immutable)。 |
| **修改方式** | `list[0] = 1` | `t = (100, 50)` | 只能**重新赋值**整个变量，不能改细节。 |

---

## ⚠️ 第 4 章常见“深坑” (Common Pitfalls)

1.  **缩进错误 (IndentationError)**
    * **忘记缩进**：循环里的代码没缩进，Python 不知道哪些是循环体。
    * **不该缩进**：循环结束后的总结句（如“我爱披萨”）如果缩进了，就会被重复打印很多次。

2.  **遗漏冒号 (SyntaxError)**
    * 写 `for x in list` 后面忘了加 `:`。这是告诉 Python “注意，下面开始循环了”。

3.  **Range 的数学陷阱**
    * 想数到 20，写 `range(1, 20)` 是错的，只会数到 19。
    * **口诀**：想包含 $n$，必须写 $n+1$。

4.  **复制列表的 Bug**
    * 如果你写 `friend_foods = my_foods`，当你给朋友加菜时，你自己的菜单也会变！
    * **修正**：一定要用切片 `friend_foods = my_foods[:]`。